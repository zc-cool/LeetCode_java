/**
 * @author zhucheng
 * @create 2021-04-16-11:18
 */
package easy.array;

//ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums ã€‚å¦‚æœå­˜åœ¨ä¸€ä¸ªæ•° x ï¼Œä½¿å¾— nums ä¸­æ°å¥½æœ‰ x ä¸ªå…ƒç´  å¤§äºæˆ–è€…ç­‰äº x ï¼Œé‚£ä¹ˆå°±ç§° nums æ˜¯ä¸€ä¸ª ç‰¹æ®Šæ•°ç»„ ï¼Œè€Œ
// x æ˜¯è¯¥æ•°ç»„çš„ ç‰¹å¾å€¼ ã€‚
//
// æ³¨æ„ï¼š x ä¸å¿… æ˜¯ nums çš„ä¸­çš„å…ƒç´ ã€‚
//
// å¦‚æœæ•°ç»„ nums æ˜¯ä¸€ä¸ª ç‰¹æ®Šæ•°ç»„ ï¼Œè¯·è¿”å›å®ƒçš„ç‰¹å¾å€¼ x ã€‚å¦åˆ™ï¼Œè¿”å› -1 ã€‚å¯ä»¥è¯æ˜çš„æ˜¯ï¼Œå¦‚æœ nums æ˜¯ç‰¹æ®Šæ•°ç»„ï¼Œé‚£ä¹ˆå…¶ç‰¹å¾å€¼ x æ˜¯ å”¯ä¸€çš„
// ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
// è¾“å…¥ï¼šnums = [3,5]
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šæœ‰ 2 ä¸ªå…ƒç´ ï¼ˆ3 å’Œ 5ï¼‰å¤§äºæˆ–ç­‰äº 2 ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
// è¾“å…¥ï¼šnums = [0,0]
//è¾“å‡ºï¼š-1
//è§£é‡Šï¼šæ²¡æœ‰æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ç‰¹æ®Šæ•°ç»„ï¼Œæ•…è€Œä¹Ÿä¸å­˜åœ¨ç‰¹å¾å€¼ x ã€‚
//å¦‚æœ x = 0ï¼Œåº”è¯¥æœ‰ 0 ä¸ªå…ƒç´  >= xï¼Œä½†å®é™…æœ‰ 2 ä¸ªã€‚
//å¦‚æœ x = 1ï¼Œåº”è¯¥æœ‰ 1 ä¸ªå…ƒç´  >= xï¼Œä½†å®é™…æœ‰ 0 ä¸ªã€‚
//å¦‚æœ x = 2ï¼Œåº”è¯¥æœ‰ 2 ä¸ªå…ƒç´  >= xï¼Œä½†å®é™…æœ‰ 0 ä¸ªã€‚
//x ä¸èƒ½å–æ›´å¤§çš„å€¼ï¼Œå› ä¸º nums ä¸­åªæœ‰ä¸¤ä¸ªå…ƒç´ ã€‚
//
// ç¤ºä¾‹ 3ï¼š
//
// è¾“å…¥ï¼šnums = [0,4,3,0,4]
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šæœ‰ 3 ä¸ªå…ƒç´ å¤§äºæˆ–ç­‰äº 3 ã€‚
//
//
// ç¤ºä¾‹ 4ï¼š
//
// è¾“å…¥ï¼šnums = [3,6,7,7,0]
//è¾“å‡ºï¼š-1
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= nums.length <= 100
// 0 <= nums[i] <= 1000
//
// Related Topics æ•°ç»„
// ğŸ‘ 17 ğŸ‘ 0
public class ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼1608 {
    public int specialArray(int[] nums) {
        //bucketï¼Œè®°å½•numsæ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°
        int[] bucket = new int[1001];
        for(int num : nums) bucket[num]++;

        //éå†bucketï¼Œä»åå‘å‰éå†ã€‚å°†bucketä¸­çš„å€¼è¿›è¡Œç›¸åŠ (å¤§å…ƒç´ å‡ºç°çš„æ¬¡æ•°)sum
        //å¦‚æœå’Œsumå°äºç­‰äºéå†åˆ°çš„ä¸‹æ ‡ç´¢å¼•iï¼Œå¹¶ä¸”å¤§äºä¸‹æ ‡å‰ä¸€ä¸ªå…ƒç´ å‡ºç°çš„ç´¢å¼•ã€‚åˆ™è¯´æ˜æ‰¾åˆ°äº†
        //å³æœ‰sumä¸ªå…ƒç´ å¤§äºç­‰äºsum
        int sum = 0;
        int start = findPreEleIndex(bucket,bucket.length);   //å…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªå‡ºç°çš„å…ƒç´ 
        for (int i = start; i > 0 ; i--) {   //ä»åå‘å‰éå†
            sum = sum + bucket[i];
            int index = findPreEleIndex(bucket, i);
            if (sum <= i && sum > index) {
                return sum;
            }
        }
        return -1;
    }

    //æ‰¾åˆ°bucketæ¡¶å½“å‰å…ƒç´ çš„å‰ä¸€ä¸ªå‡ºç°çš„å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¿”å›0
    public int findPreEleIndex(int[] bucket,int i){
        for (int j = i-1; j >= 0 ; j--) {
            if(bucket[j] != 0) return j;
        }
        return 0;
    }
}

