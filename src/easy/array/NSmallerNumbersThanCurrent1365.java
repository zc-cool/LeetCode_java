/**
 * @author zhucheng
 * @create 2021-04-09-16:42
 */
package easy.array;

import java.util.Arrays;

//ç»™ä½ ä¸€ä¸ªæ•°ç»„ numsï¼Œå¯¹äºå…¶ä¸­æ¯ä¸ªå…ƒç´  nums[i]ï¼Œè¯·ä½ ç»Ÿè®¡æ•°ç»„ä¸­æ¯”å®ƒå°çš„æ‰€æœ‰æ•°å­—çš„æ•°ç›®ã€‚
//
// æ¢è€Œè¨€ä¹‹ï¼Œå¯¹äºæ¯ä¸ª nums[i] ä½ å¿…é¡»è®¡ç®—å‡ºæœ‰æ•ˆçš„ j çš„æ•°é‡ï¼Œå…¶ä¸­ j æ»¡è¶³ j != i ä¸” nums[j] < nums[i] ã€‚
//
// ä»¥æ•°ç»„å½¢å¼è¿”å›ç­”æ¡ˆã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
// è¾“å…¥ï¼šnums = [8,1,2,2,3]
//è¾“å‡ºï¼š[4,0,1,1,3]
//è§£é‡Šï¼š
//å¯¹äº nums[0]=8 å­˜åœ¨å››ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼Œ2ï¼Œ2 å’Œ 3ï¼‰ã€‚
//å¯¹äº nums[1]=1 ä¸å­˜åœ¨æ¯”å®ƒå°çš„æ•°å­—ã€‚
//å¯¹äº nums[2]=2 å­˜åœ¨ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼‰ã€‚
//å¯¹äº nums[3]=2 å­˜åœ¨ä¸€ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼‰ã€‚
//å¯¹äº nums[4]=3 å­˜åœ¨ä¸‰ä¸ªæ¯”å®ƒå°çš„æ•°å­—ï¼šï¼ˆ1ï¼Œ2 å’Œ 2ï¼‰ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
// è¾“å…¥ï¼šnums = [6,5,4,8]
//è¾“å‡ºï¼š[2,1,0,3]
//
//
// ç¤ºä¾‹ 3ï¼š
//
// è¾“å…¥ï¼šnums = [7,7,7,7]
//è¾“å‡ºï¼š[0,0,0,0]
//
//
//
//
// æç¤ºï¼š
//
//
// 2 <= nums.length <= 500
// 0 <= nums[i] <= 100
//
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨
// ğŸ‘ 151 ğŸ‘ 0
public class NSmallerNumbersThanCurrent1365 {
    //æ–¹æ³•1ï¼š
    /*
    æ€è·¯ï¼š
        æ•°ç»„ansæ˜¯ç»“æœæ•°ç»„ã€‚
        æ‹·è´æ•°ç»„numså…ƒç´ åˆ°nums2ä¸­ï¼Œå°†æ•°ç»„nums2çš„æ•°ç»„æ’åºã€‚
        éå†numsæ•°ç»„çš„å…ƒç´ ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨nums2ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¿”å›ç´¢å¼•ä¸‹æ ‡jã€‚
        æ³¨æ„ï¼Œå› ä¸ºå¯èƒ½æœ‰é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥äºŒåˆ†æŸ¥æ‰¾éœ€è¦æ£€æŸ¥ä¸€ä¸‹å‰ä¸€ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯æ‰€è¦æŸ¥æ‰¾çš„å…ƒç´ ã€‚
        ç´¢å¼•ä¸‹æ ‡jå°±ä»£è¡¨æ¯”æ‰€è¦æ¯”è¾ƒçš„å…ƒç´ å°çš„ä¸ªæ•°ã€‚
     */
    public int[] smallerNumbersThanCurrent(int[] nums) {
        int[] nums2 = new int[nums.length];
        System.arraycopy(nums,0,nums2,0,nums.length);
        Arrays.sort(nums2);

        int[] ans = new int[nums.length];
        for (int i = 0; i < nums.length; i++) {
            int j = Arrays.binarySearch(nums2,nums[i]);
            while(j > 0 && nums2[j-1] == nums[i]){
                j--;
            }
            ans[i] = j;
        }
        return ans;
    }
    //æ–¹æ³•2ï¼šä½¿ç”¨æ¡¶æ’åº  é¢˜ç›®ï¼š0 <= nums[i] <= 100
    public int[] smallerNumbersThanCurrent2(int[] nums) {
        //æ¡¶ï¼Œç»Ÿè®¡numsä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€‚ä¸‹æ ‡å°±æ˜¯numsä¸­çš„å…ƒç´ 
        int[] bucket = new int[101];
        for (int i = 0; i < nums.length; i++) {
            bucket[nums[i]]++;
        }

        //æ›´æ–°æ¡¶ä¸­çš„å…ƒç´ å€¼ï¼ˆå˜æˆæ¯”å½“å‰å…ƒç´ å°çš„ä¸ªæ•°ï¼‰
        for (int j = 1; j < 101; j++) {
            bucket[j] = bucket[j] + bucket[j-1];
        }

        //éå†numsæ•°ç»„ï¼Œæ‰¾åˆ°numsä¸­å…ƒç´ åœ¨æ¡¶ä¸­å¯¹åº”çš„å€¼ï¼ˆæ³¨æ„ï¼Œåº”è¯¥æ˜¯æ¡¶å‰ä¸€ä¸ªä¸‹æ ‡çš„å€¼ï¼Œä¸åŒ…æ‹¬è‡ªèº«ï¼‰
        int[] ans = new int[nums.length];
        for (int k = 0; k < nums.length; k++) {
            ans[k] = bucket[nums[k]] == 0 ? 0 : bucket[nums[k]-1];
        }
        return ans;
    }
}
